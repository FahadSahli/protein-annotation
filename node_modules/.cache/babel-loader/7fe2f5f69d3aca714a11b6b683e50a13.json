{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ec2-user/environment/web-tier-repository/src/App.js\";\nimport './App.css';\nimport { SetS3Config } from \"./services\";\nimport { withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport Storage from \"@aws-amplify/storage\";\nimport { Component } from \"react\";\nimport Predictions from \"./Predictions\";\nimport { Auth } from 'aws-amplify';\nimport { Button } from 'bootstrap-4-react';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      imageName: \"\",\n      imageFile: \"\",\n      userID: \"\",\n      response: \"\"\n    };\n\n    this.uploadImage = () => {\n      SetS3Config(\"intern-project-web-tier-uploads\", \"private\");\n      Storage.put(`${this.state.userID}/user-files/${this.upload.files[0].name}`, this.upload.files[0], {\n        contentType: this.upload.files[0].type\n      }).then(result => {\n        this.upload = null;\n        this.setState({\n          response: \"Success uploading file!\"\n        });\n      }).catch(err => {\n        this.setState({\n          response: `Cannot uploading file: ${err}`\n        });\n      });\n    };\n  }\n\n  async componentDidMount() {\n    //await (await Auth.currentCredentials()) // Wait for credentials\n    const info = await Auth.currentUserInfo();\n    console.log('Returned info: ', info['attributes']['sub']); //this.setState({ info })\n\n    this.setState({\n      userID: info['attributes']['sub']\n    });\n  }\n\n  signOut() {\n    Auth.signOut();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"S3 Upload example...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\" //accept=\"image/png, image/jpeg\"\n        ,\n        style: {\n          display: \"none\"\n        },\n        ref: ref => this.upload = ref,\n        onChange: e => this.setState({\n          imageFile: this.upload.files[0],\n          imageName: this.upload.files[0].name\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: this.state.imageName,\n        placeholder: \"Select file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          this.upload.value = null;\n          this.upload.click();\n        },\n        loading: this.state.uploading,\n        children: \"Browse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.uploadImage,\n        children: \" Upload File \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), !!this.state.response && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.response\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Predictions, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          light: true,\n          outline: true,\n          sm: true,\n          border: \"0\",\n          onClick: this.signOut,\n          children: \"Sign Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withAuthenticator(App); //export default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/ec2-user/environment/web-tier-repository/src/App.js"],"names":["SetS3Config","withAuthenticator","AmplifySignOut","Storage","Component","Predictions","Auth","Button","App","state","imageName","imageFile","userID","response","uploadImage","put","upload","files","name","contentType","type","then","result","setState","catch","err","componentDidMount","info","currentUserInfo","console","log","signOut","render","display","ref","e","value","click","uploading"],"mappings":"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","sourcesContent":["import './App.css';\nimport { SetS3Config } from \"./services\";\nimport { withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport Storage from \"@aws-amplify/storage\";\nimport { Component } from \"react\";\nimport Predictions from \"./Predictions\"\nimport { Auth } from 'aws-amplify';\nimport { Button } from 'bootstrap-4-react';\n\n\nclass App extends Component {\n  \n  state = {\n    imageName: \"\",\n    imageFile: \"\",\n    userID : \"\",\n    response: \"\"\n  };\n  \n    async componentDidMount() {\n    //await (await Auth.currentCredentials()) // Wait for credentials\n\n    const info = await Auth.currentUserInfo()\n    console.log('Returned info: ', info['attributes']['sub'])\n    //this.setState({ info })\n     this.setState({ userID : info['attributes']['sub']})\n  }\n  \n  \n  \n  \n  uploadImage = () => {\n    SetS3Config(\"intern-project-web-tier-uploads\", \"private\");\n    Storage.put(`${this.state.userID}/user-files/${this.upload.files[0].name}`,\n                this.upload.files[0],\n                { contentType: this.upload.files[0].type })\n      .then(result => {\n        this.upload = null;\n        this.setState({ response: \"Success uploading file!\" });\n      })\n      .catch(err => {\n        this.setState({ response: `Cannot uploading file: ${err}` });\n      });\n  };\n  \n  signOut() {\n    Auth.signOut();\n  }\n  \n  render() {\n    return (\n      <div className=\"App\">\n        <h2>S3 Upload example...</h2>\n        <input\n          type=\"file\"\n          //accept=\"image/png, image/jpeg\"\n          style={{ display: \"none\" }}\n          ref={ref => (this.upload = ref)}\n          onChange={e =>\n            this.setState({\n              imageFile: this.upload.files[0],\n              imageName: this.upload.files[0].name\n            })\n          }\n        />\n        <input value={this.state.imageName} placeholder=\"Select file\" />\n        <button\n          onClick={e => {\n            this.upload.value = null;\n            this.upload.click();\n          }}\n          loading={this.state.uploading}\n        >\n          Browse\n        </button>\n\n        <button onClick={this.uploadImage}> Upload File </button>\n\n        {!!this.state.response && <div>{this.state.response}</div>}\n        \n          <div>\n            <Predictions />\n          </div>\n          <div>\n            <Button light outline sm border=\"0\" onClick={this.signOut}>Sign Out</Button>\n          </div>\n  \n      </div>\n    );\n  }\n}\n\nexport default withAuthenticator(App);\n//export default App;\n"]},"metadata":{},"sourceType":"module"}