{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ec2-user/environment/web-tier-repository/src/components/Home.js\";\nimport { SetS3Config } from \"./services\";\nimport Predictions from \"./Predictions\";\nimport { withAuthenticator } from '@aws-amplify/ui-react';\nimport Storage from \"@aws-amplify/storage\";\nimport { Component } from \"react\";\nimport { Auth } from 'aws-amplify';\nimport './styles.css';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      fileName: \"\",\n      inputFile: \"\",\n      userID: \"\",\n      response: \"\",\n      showPredictions: false\n    };\n\n    this.uploadFile = () => {\n      SetS3Config(\"intern-project-web-tier-uploads\", \"private\");\n      Storage.put(`${this.state.userID}/${this.upload.files[0].name}`, this.upload.files[0], {\n        contentType: this.upload.files[0].type\n      }).then(result => {\n        this.upload = null;\n        this.setState({\n          response: \"Success uploading file!\"\n        });\n      }).catch(err => {\n        this.setState({\n          response: `Cannot uploading file: ${err}`\n        });\n      });\n    };\n\n    this.refresh = () => {\n      window.location.reload();\n      this.setState({\n        showPredictions: !this.state.showPredictions\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const info = await Auth.currentUserInfo();\n    console.log('Returned info: ', info['attributes']['sub']); //this.setState({ info });\n\n    this.setState({\n      userID: info['attributes']['sub']\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Protein Annotation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please upload your file...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\" //accept=\"image/png, image/jpeg\"\n        ,\n        style: {\n          display: \"none\"\n        },\n        ref: ref => this.upload = ref,\n        onChange: e => this.setState({\n          inputFile: this.upload.files[0],\n          fileName: this.upload.files[0].name\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: this.state.fileName,\n        placeholder: \"Select file\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          this.upload.value = null;\n          this.upload.click();\n        },\n        loading: this.state.uploading,\n        class: \"button\",\n        children: \"Browse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.uploadFile,\n        class: \"button\",\n        children: \" Upload File \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), !!this.state.response && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.response\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.refresh,\n          class: \"button\",\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), this.state.showPredictions && /*#__PURE__*/_jsxDEV(Predictions, {\n          userID: this.state.userID\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 42\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default _c = withAuthenticator(Home);\n/*\n<button onClick={() => this.setState({ showPredictions: !this.state.showPredictions })} class=\"button\">Show Table</button>\n{this.state.showPredictions && <Predictions userID={this.state.userID} />}\n*/\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/ec2-user/environment/web-tier-repository/src/components/Home.js"],"names":["SetS3Config","Predictions","withAuthenticator","Storage","Component","Auth","Home","state","fileName","inputFile","userID","response","showPredictions","uploadFile","put","upload","files","name","contentType","type","then","result","setState","catch","err","refresh","window","location","reload","componentDidMount","info","currentUserInfo","console","log","render","display","ref","e","value","click","uploading"],"mappings":"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","sourcesContent":["import { SetS3Config } from \"./services\";\nimport Predictions from \"./Predictions\";\nimport { withAuthenticator } from '@aws-amplify/ui-react';\nimport Storage from \"@aws-amplify/storage\";\nimport { Component } from \"react\";\nimport { Auth } from 'aws-amplify';\nimport './styles.css';\n\nclass Home extends Component {\n  \n  state = {\n    fileName: \"\",\n    inputFile: \"\",\n    userID : \"\",\n    response: \"\",\n    showPredictions: false\n  };\n  \n  async componentDidMount() {\n\n    const info = await Auth.currentUserInfo();\n    console.log('Returned info: ', info['attributes']['sub']);\n    //this.setState({ info });\n     this.setState({ userID : info['attributes']['sub']});\n  }\n  \n  uploadFile = () => {\n    SetS3Config(\"intern-project-web-tier-uploads\", \"private\");\n    Storage.put(`${this.state.userID}/${this.upload.files[0].name}`,\n                this.upload.files[0],\n                { contentType: this.upload.files[0].type })\n      .then(result => {\n        this.upload = null;\n        this.setState({ response: \"Success uploading file!\" });\n      })\n      .catch(err => {\n        this.setState({ response: `Cannot uploading file: ${err}` });\n      });\n  };\n  \n  refresh =() => {\n    window.location.reload();\n    this.setState({ showPredictions: !this.state.showPredictions });\n  }\n  \n  render() {\n    return (\n      <div className=\"App\">\n        \n        <h1>Protein Annotation</h1>\n        \n        <h3>Please upload your file...</h3>\n          <input\n            type=\"file\"\n            //accept=\"image/png, image/jpeg\"\n            style={{ display: \"none\" }}\n            ref={ref => (this.upload = ref)}\n            onChange={e =>\n              this.setState({\n                inputFile: this.upload.files[0],\n                fileName: this.upload.files[0].name\n              })\n            }\n          />\n        <input value={this.state.fileName} placeholder=\"Select file\" />\n        <button\n          onClick={e => {\n            this.upload.value = null;\n            this.upload.click();\n          }}\n          loading={this.state.uploading}\n          class=\"button\"\n        >\n          Browse\n        </button>\n        <button onClick={this.uploadFile} class=\"button\"> Upload File </button>\n        {!!this.state.response && <div>{this.state.response}</div>}\n        \n        <div>\n          <button onClick={this.refresh} class=\"button\">Refresh</button>\n          {this.state.showPredictions && <Predictions userID={this.state.userID} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuthenticator(Home);\n\n/*\n<button onClick={() => this.setState({ showPredictions: !this.state.showPredictions })} class=\"button\">Show Table</button>\n{this.state.showPredictions && <Predictions userID={this.state.userID} />}\n*/"]},"metadata":{},"sourceType":"module"}